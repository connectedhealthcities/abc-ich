<ion-view title="Calculate Beriplex dose" hide-nav-bar="true">
    <ion-content padding="true">

        <!-- Patient id-->
        <div class="row chi-header-row">
            <div ng-show="vm.isDemoMode" class="col-50 chi-demo-mode">
                <p><strong>Demo mode</strong></p>
            </div>

            <div ng-show="vm.isDemoMode" class="col-50 chi-patient-id">
                <p><strong>Patient Id: </strong>{{vm.patientId}}</p>
            </div>
            <div ng-show="!vm.isDemoMode" class="col-50 col-offset-50 chi-patient-id">
                <p><strong>Patient Id: </strong>{{vm.patientId}}</p>
            </div>
        </div>
        <hr>
       
        <h2 class="text-center input-blue">Treat as quickly as possible</h2>
        <h3 class="text-center input-blue">Target door to needle time is less than 90 minutes!</h3>
        <hr>

        <div class="card list" ng-show="vm.externalScanHospitalName != null">
            <div class="item item-icon-left item-text-wrap card-header card-header-green">
                <i class="icon ion-ionic"></i>Reversal agent administered at external hospital?
            </div>
            <ion-radio ng-model="vm.reversalAgentAdministeredAtExternalHospital" ng-change="vm.onReversalAgentAdministeredAtExternalHospitalChanged()" name="reversal-agent-external" ng-value="true">
                <span class="input-blue">Yes</span>
            </ion-radio>
            <ion-radio ng-model="vm.reversalAgentAdministeredAtExternalHospital" ng-change="vm.onReversalAgentAdministeredAtExternalHospitalChanged()" name="reversal-agent-external" ng-value="false">
                <span class="input-blue">No</span>
            </ion-radio>
        </div>

        <div class="card list" ng-show="vm.externalScanHospitalName == null || (vm.reversalAgentAdministeredAtExternalHospital != null && !vm.reversalAgentAdministeredAtExternalHospital)">
            <div class="item item-icon-left item-text-wrap card-header card-header-green">
                <i class="icon ion-ionic"></i>Do you plan to administer Beriplex without waiting for INR?
            </div>
            <ion-radio ng-model="vm.administerBeriplexWithoutInr" ng-change="vm.onAdministerBeriplexWithoutInrChanged()" name="administer-without-inr" ng-value="true">
                <span class="input-blue">Yes</span>
            </ion-radio>
            <ion-radio ng-model="vm.administerBeriplexWithoutInr" ng-change="vm.onAdministerBeriplexWithoutInrChanged()" name="administer-without-inr" ng-value="false">
                <span class="input-blue">No</span>
            </ion-radio>
        </div>

        <div class="card list" ng-show="vm.administerBeriplexWithoutInr != null && !vm.administerBeriplexWithoutInr">
            <div class="item item-icon-left card-header card-header-green">
                <i class="icon ion-ionic"></i>INR reading
            </div>
            <label class="item item-input">
                <span class="input-label">Value</span>
                <input ng-model="vm.inrValue" ng-change="vm.onInrValueChanged()" type="number" placeholder="">
            </label>
            <div class="row row-center">
                <div class="col-90">
                    <label class="item item-input">
                        <span class="input-label">Date</span>
                        <input ng-model="vm.inrDate" type="date" placeholder="">
                    </label>
                    <label class="item item-input">
                        <span class="input-label">Time</span>
                        <input step="60" displayformat="HH:mm" ng-model="vm.inrTime" type="time" placeholder="">
                    </label>
                </div>
                <div class="col-10 text-center">
                    <button ng-click="vm.onInrNow()" class="button button-calm ">Now</button>
                </div>
            </div>
        </div>
        
        <div class="card list" ng-show="vm.administerBeriplexWithoutInr != null && !vm.administerBeriplexWithoutInr">
            <div class="item item-icon-left card-header card-header-green">
                <i class="icon ion-ionic"></i>INR type
            </div>
            <ion-radio ng-model="vm.inrType" name="anticoagulant-type" ng-value="'Point of care'">
                <span class="input-blue">Point of care</span>
            </ion-radio>
            <ion-radio ng-model="vm.inrType" name="anticoagulant-type" ng-value="'Laboratory'">
                <span class="input-blue">Laboratory</span>
            </ion-radio>
        </div>

        <div class="card list" ng-show="vm.administerBeriplexWithoutInr != null">
            <div class="item item-icon-left card-header card-header-green">
                <i class="icon ion-ionic"></i>Estimated weight
            </div>
            <label class="item item-input">
                <span class="input-label">Kg</span>
                <input ng-change="vm.onWeightInKgChanged()" ng-model="vm.estimatedWeightInKg" type="number" placeholder="">
            </label>
            <label class="item item-input">
                <span class="input-label">Stones</span>
                <input ng-change="vm.onWeightInStonesChanged()" ng-model="vm.estimatedWeightInStones" type="number" placeholder="">
            </label>
        </div>

        <div class="card list" ng-show="vm.showBeriplexAdministrationOverride()">
            <div class="item item-icon-left item-text-wrap card-header card-header-green">
                <i class="icon ion-ionic"></i>Anti-coagulant is unknown and INR > 1.2. Prescribe Beriplex anyway?
            </div>
            <ion-radio ng-model="vm.administerBeriplexWhenUnknown" name="administer-override" ng-value="true">
                <span class="input-blue">Yes</span>
            </ion-radio>
            <ion-radio ng-model="vm.administerBeriplexWhenUnknown" name="administer-override" ng-value="false">
                <span class="input-blue">No</span>
            </ion-radio>
        </div>
        
        <!--Next button-->
        <div class="chi-spacer"></div>
        <div class="col-offset-50 col-50">
            <button ng-disabled="!vm.isNextButtonEnabled()" ng-click="vm.onNext()" class="button button-calm  button-block icon-right ion-chevron-right">Next</button>
        </div>
    </ion-content>
</ion-view>