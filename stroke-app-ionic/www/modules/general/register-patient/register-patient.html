<ion-view title="Register patient">
  <ion-content padding="true">

    <div ng-show="vm.isDemoMode">
        <div class="row chi-header-row">
          <div class="chi-demo-mode">
            <p><strong>Demo mode</strong></p>
          </div>
        </div>
        <hr>
    </div>

    <div class="list card">
        <ion-item class="item-icon-left  card-header card-header-green">
          <i class="icon ion-ionic"></i>Personal information
        </ion-item>
        <label class="item item-input">
          <span class="input-label">Initials</span>
          <input type="text" placeholder="" ng-model="vm.initials" ng-change="vm.onInitialsChanged(vm.initials)">
        </label>
    </div>
    
    <div class="list card">
        <ion-item class="item-icon-left  card-header card-header-green">
          <i class="icon ion-ionic"></i>Date of birth known
        </ion-item>
        <ion-radio ng-model="vm.isDateOfBirthKnown" ng-change="vm.isDateOfBirthKnownChanged()" name="dob-known" ng-value="true">
          <span class="input-blue">Yes</span>
        </ion-radio>
        <ion-radio ng-model="vm.isDateOfBirthKnown" ng-change="vm.isDateOfBirthKnownChanged()" name="dob-known" ng-value="false">
          <span class="input-blue">No</span>
        </ion-radio>
    </div>
 
    <div class="list card" ng-show="vm.isDateOfBirthKnown != null && vm.isDateOfBirthKnown">
         <ion-item class="item-icon-left  card-header card-header-green">
          <i class="icon ion-ionic"></i>Date of birth
        </ion-item>
        <ion-item class="row">
          <div class="col">
            <input type="number" placeholder="DD" ng-change="vm.onDateChanged()" ng-model="vm.day">
          </div>
          <div class="col">
            <input type="number" placeholder="MM" ng-change="vm.onDateChanged()" ng-model="vm.month">
          </div>
          <div class="col">
            <input type="number" placeholder="YYYY" ng-change="vm.onDateChanged()" ng-model="vm.year">
          </div>
        </ion-item>          
        <ion-item class="item-icon-left data-display-region" ng-show="vm.dateOfBirth">
            <i class="icon ion-information-circled"></i>{{vm.dateOfBirth | date: 'dd MMM yyyy'}}
        </ion-item>
     </div>

    <div class="list card" ng-show="vm.isDateOfBirthKnown != null && !vm.isDateOfBirthKnown">
        <ion-item class="item-icon-left  card-header card-header-green">
          <i class="icon ion-ionic"></i>Estimated age
        </ion-item>
        <label class="item item-input">
          <span class="input-label">Estimated age</span>
          <input type="number" placeholder="Enter age here" ng-model="vm.estimatedAge">
        </label>
    </div>

    <div class="list card">
        <ion-item class="item-icon-left  card-header card-header-green">
          <i class="icon ion-ionic"></i>Scan performed at external hospital
        </ion-item>
        <ion-radio ng-model="vm.isExternalScan" ng-change="vm.isExternalScanChanged()" name="external-scan" ng-value="true">
          <span class="input-blue">Yes</span>
        </ion-radio>
        <ion-radio ng-model="vm.isExternalScan" ng-change="vm.isExternalScanChanged()" name="external-scan" ng-value="false">
          <span class="input-blue">No</span>
        </ion-radio>
    </div>

    <div class="list card" ng-show="vm.isExternalScan != null && !vm.isExternalScan">
        <ion-item class="item-icon-left card-header-green">
          <i class="icon ion-ionic"></i>Scan time
        </ion-item>
        <div class="row row-center">         
          <div class="col-90">
            <label class="item item-input">
              <span class="input-label">Date</span>
              <input type="date" ng-model="vm.scanDate">
            </label>
            <label class="item item-input">
              <span class="input-label">Time</span>
              <input type="time" step="60" ng-model="vm.scanTime" displayformat="HH:mm">
            </label>
          </div>

          <div class="col-10 text-center">
            <button ng-click="vm.onScanNow()" class="button button-calm">Now</button>
          </div>
        </div>
    </div>

    <div class="list card" ng-show="vm.isExternalScan != null && vm.isExternalScan">
        <ion-item class="item-icon-left card-header card-header-green">
          <i class="icon ion-ionic"></i>External hospital
        </ion-item>
        <ion-radio ng-change="vm.selectedHospitalChanged()" ng-repeat="hospital in vm.hospitals" ng-model="vm.selectedHospital" value="{{hospital.uniqueId}}">
          <span class="input-blue">{{hospital.uniqueId}}</span>
        </ion-radio>
        <label ng-show="vm.selectedHospital ==='Other'" class="item item-input">
          <span class="input-label">Hospital name</span>
          <input type="text" placeholder="" ng-model="vm.otherHospital">
        </label>
    </div>

    <!--Next button-->
    <div class="chi-spacer"></div>
    <div class="col-offset-50 col-50">
      <button ng-disabled="!vm.isNextButtonEnabled()" ng-click="vm.onNext()" class="button button-calm  button-block icon-right ion-chevron-right">Next</button>
    </div>
  </ion-content>
</ion-view>